---
import ProjectMobileInfo from '@/components/shared/ProjectMobileInfo.astro'
import { getProjectUrl } from '@/config/i18n/projects'

export interface ProjectCardProps {
  slug?: string
  projectNumber: number
  hoverColor?: string
  textHoverColor?: string
  image?: string
  alt?: string
  title?: string
  clients?: string
  loading?: 'eager' | 'lazy'
  locale?: 'ca' | 'es' | 'en'
}

const {
  slug,
  projectNumber,
  hoverColor = 'transparent',
  textHoverColor = 'inherit',
  image,
  alt,
  title,
  clients,
  loading = 'lazy',
  locale = 'ca',
} = Astro.props as ProjectCardProps
---

{
  image ? (
    <a
      href={slug ? getProjectUrl(slug, locale) : '#'}
      class={`project-mobile project-mobile-${projectNumber}`}
      style={`--hover-bg-color: ${hoverColor}; --hover-text-color: ${textHoverColor};`}
    >
      <div class="project-image-wrapper">
        <img
          src={image}
          alt={alt || title || `Project ${projectNumber}`}
          class="project-image"
          loading={loading}
        />
      </div>
      <ProjectMobileInfo
        title={title || `Project ${projectNumber}`}
        subtitle={clients}
      />
    </a>
  ) : null
}

<style>
  .project-mobile {
    display: flex;
    flex-direction: column;
    gap: 1.125rem;
    text-decoration: none;
    color: inherit;
    transition: transform 0.3s ease;
    flex: 0 0 auto;
    scroll-snap-align: start;
    width: min(72.3vw, 19.43rem);
  }

  .project-mobile:active {
    transform: scale(0.98);
  }

  .project-image-wrapper {
    width: 100%;
    aspect-ratio: 282 / 384.9;
    border-radius: 0.75rem;
    overflow: hidden;
    background-color: var(--hover-bg-color);
  }

  .project-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }
</style>
