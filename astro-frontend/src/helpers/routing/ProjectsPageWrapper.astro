---
import ProjectsLayout from '@/layouts/pages/ProjectsLayout.astro'
import { fetchProjectsByLocale } from '@/lib/sanity/queries/projectQueries'
import { fetchServicesByLocale } from '@/lib/sanity/queries/serviceQueries'
import type { Locale } from '@/config/i18n/projects'

interface Props {
  locale: Locale
}

const { locale } = Astro.props

// Fetch all projects and services for the given locale
let projects = null
let services = null

try {
  projects = await fetchProjectsByLocale(locale)
  services = await fetchServicesByLocale(locale)
} catch (error) {
  console.error(`Error fetching projects/services for locale ${locale}:`, error)
}
---

<ProjectsLayout {locale} {projects} {services} />
