---
import BaseLayout from '@/layouts/BaseLayout.astro'
import PageSection from '@/components/shared/PageSection.astro'
import ServicesList from '@/components/shared/ServicesList.astro'
import { fetchServicesPageByLocale } from '@/shared/lib/sanity/queries/servicesPageQueries'
import type { ServicesPage } from '@/shared/schemas/sanity/servicesPageSchema'
import { portableTextToHtmlForPageSection } from '@/shared/lib/sanity/utils/portableTextToHtml'

const locale = 'ca'

let servicesPageData: ServicesPage | null = null

try {
  servicesPageData = await fetchServicesPageByLocale(locale)
} catch (error) {
  console.error('Error fetching services page data:', error)
}

const descriptionHtml = portableTextToHtmlForPageSection(servicesPageData?.description)
---

<BaseLayout title="Serveis - Biombo Studio">
  <main>

    <PageSection
      title={servicesPageData?.title || "Serveis"}
      description={descriptionHtml || "Comptem amb una xarxa de colÂ·laboradors, experts en diverses disciplines, que aporten el seu coneixement per garantir resultats de primer nivell."}
    />



      <ServicesList services={servicesPageData?.selectedServices} />

  </main>
</BaseLayout>

<style>
  main{
    padding-block-end: var(--padding-block);
  }
  
</style>
