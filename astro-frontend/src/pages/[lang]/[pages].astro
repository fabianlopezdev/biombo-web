---
import PageLayoutRouter from '@/helpers/routing/PageLayoutRouter.astro'
import {
  otherLanguageRoutes,
  getLayoutForOtherLanguagePage,
  type OtherLanguageStaticPath,
} from '@/config/routing/pageRoutes'

export const prerender = true

export async function getStaticPaths(): Promise<OtherLanguageStaticPath[]> {
  const paths: OtherLanguageStaticPath[] = []

  Object.entries(otherLanguageRoutes).forEach(([lang, pages]) => {
    Object.keys(pages).forEach((page) => {
      paths.push({
        params: { lang, pages: page },
        props: { lang, page, locale: lang },
      })
    })
  })

  return paths
}

const { lang, page, locale } = Astro.props
const layout = getLayoutForOtherLanguagePage(lang, page)
---

<PageLayoutRouter {layout} {locale} />
