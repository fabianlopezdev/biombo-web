---
import SingleProjectLayout from '@/layouts/pages/SingleProjectLayout.astro'
import type { SupportedLocale } from '@/config/routing/projectRoutes'

// SSR mode - no prerendering, fetches fresh data on each request
export const prerender = false

const lang = Astro.params.lang as string
const slug = Astro.params.project as string
const locale = lang as SupportedLocale

// Handle invalid routes
if (!lang || !slug) {
  return Astro.redirect('/404')
}

// Validate language
if (lang !== 'en' && lang !== 'es') {
  return Astro.redirect('/404')
}
---

<SingleProjectLayout {slug} {locale} />
