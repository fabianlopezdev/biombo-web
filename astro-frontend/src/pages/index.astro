---
import Homepage from '@/layouts/HomepageLayout.astro'
import { fetchHomePageByLocale } from '@/shared/lib/sanity/queries/homePageQueries'

console.log('Astro.site in src/pages/index.astro:', Astro.site)
import type { HomePage } from '@/shared/schemas/sanity/homePageSchema'

// This is the root index.astro file (Catalan)
const locale = 'ca' // Default locale is Catalan

// Fetch homepage data from Sanity
let homePageData: HomePage | null = null

try {
  homePageData = await fetchHomePageByLocale(locale)
  console.log('homePageData after fetch:', homePageData)
} catch (error) {
  console.error('Error fetching homepage data:', error)
}

console.log('homePageData after fetch:', homePageData)
---

<Homepage locale={locale} homePageData={homePageData} />
