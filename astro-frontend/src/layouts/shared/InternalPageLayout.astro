---
import TwoColumnLayout from '@/components/shared/TwoColumnLayout.astro'
import BaseLayout from '@/layouts/shared/BaseLayout.astro'

interface Props {
  pageMetaTitle: string
  pageTitle: string
  pageMetaDescription: string
  pageDescription?: string | null // Actual page description from Sanity (can be HTML)
}

const { pageMetaTitle, pageTitle, pageMetaDescription, pageDescription = null } = Astro.props
const hasTwoColumnContent = Astro.slots.has('two-column-content')

console.log('ðŸ“‹ [InternalPageLayout] Page Title:', pageTitle)
console.log('ðŸ“‹ [InternalPageLayout] Has two-column-content slot:', hasTwoColumnContent)
console.log('ðŸ“‹ [InternalPageLayout] Page Description (Sanity):', pageDescription)
console.log('ðŸ“‹ [InternalPageLayout] Meta Description (SEO):', pageMetaDescription)
---

<BaseLayout
  pageMetaTitle={pageMetaTitle}
  pageMetaDescription={pageMetaDescription}
  skipTarget="#main"
>
  <main id="main" class="main-content">
    {
      hasTwoColumnContent ? (
        <TwoColumnLayout title={pageTitle}>
          <Fragment slot="second-column">
            <slot name="two-column-content" />
          </Fragment>
        </TwoColumnLayout>
      ) : (
        <TwoColumnLayout title={pageTitle} description={pageDescription || pageMetaDescription} />
      )
    }
    <slot />
  </main>
</BaseLayout>

<style>
  .main-content {
    margin-block-start: var(--header-height);
    padding-inline: var(--padding-inline);
    padding-block: var(--padding-block);
  }
</style>
